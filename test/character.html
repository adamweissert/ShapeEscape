<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <style>
            canvas{
                border: 1px solid #000;
				background-color: #000;
            }
        </style>
    </head>
    <body>
 
    <div id="gamepadPrompt"></div>
    <canvas id="canvas" width=720 height=480></canvas>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script>
    var hasGP = false;
    var repGP;
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	ctx.strokeStyle = 'white';
	ctx.fillStyle = 'red';
	ctx.lineWidth = 2;

	ctx.beginPath();
	ctx.arc(100, 75, 25, 0, 2 * Math.PI);
		
	ctx.fill();
	ctx.stroke();
	

 
    function canGame() {
        return "getGamepads" in navigator;
    }
 
    function reportOnGamepad() {
        var gp = navigator.getGamepads()[0];
 
			if(gp.buttons[0].pressed){
            	console.log('A');
        	}
			else if(gp.buttons[3].pressed){
				console.log('Y');
			}
		}
		
 
    $(document).ready(function() {
 
        if(canGame()) {
 
            var prompt = "To begin using your gamepad, connect it and press any button!";
            $("#gamepadPrompt").text(prompt);
 
            $(window).on("gamepadconnected", function() {
                hasGP = true;
                $("#gamepadPrompt").html("Gamepad connected!");
                console.log("connection event");
                repGP = window.setInterval(reportOnGamepad,100);
            });
 
            $(window).on("gamepaddisconnected", function() {
                console.log("disconnection event");
                $("#gamepadPrompt").text(prompt);
                window.clearInterval(repGP);
            });
 
            //setup an interval for Chrome
            var checkGP = window.setInterval(function() {
                if(navigator.getGamepads()[0]) {
                    if(!hasGP) $(window).trigger("gamepadconnected");
                    window.clearInterval(checkGP);
                }
            }, 500);
        }
 	//super helpful: https://blog.teamtreehouse.com/gamepad-controls-html5-games
    });
    </script>
    </body>
</html>